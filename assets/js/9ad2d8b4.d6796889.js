"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8985],{9613:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>h});var r=t(9496);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),m=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=m(e.components);return r.createElement(l.Provider,{value:n},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=m(t),d=a,h=u["".concat(l,".").concat(d)]||u[d]||c[d]||o;return t?r.createElement(h,i(i({ref:n},p),{},{components:t})):r.createElement(h,i({ref:n},p))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var m=2;m<o;m++)i[m]=t[m];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5852:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var r=t(1163),a=(t(9496),t(9613));const o={authors:["green"],title:"JMH(Java Measurement Harness) \ubca4\uce58\ub9c8\ud0b9 \ud14c\uc2a4\ud2b8",date:"2019-07-03T21:00",tags:["benchmarking","measurement"]},i=void 0,s={permalink:"/blog/2019/07/03/JMH",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2019-07-03-JMH.md",source:"@site/blog/2019-07-03-JMH.md",title:"JMH(Java Measurement Harness) \ubca4\uce58\ub9c8\ud0b9 \ud14c\uc2a4\ud2b8",description:"\ubca4\uce58\ub9c8\ud0b9 \ud14c\uc2a4\ud2b8\ub97c \ud574\ubcf4\uac8c\ub3c4 \ub418\ub124\uc694.",date:"2019-07-03T21:00:00.000Z",formattedDate:"2019\ub144 7\uc6d4 3\uc77c",tags:[{label:"benchmarking",permalink:"/blog/tags/benchmarking"},{label:"measurement",permalink:"/blog/tags/measurement"}],readingTime:4.325,truncated:!1,authors:[{name:"Green",title:"\uc5b4\uc911\uc774\ub5a0\uc911\uc774 \ub4a4\uc8fd\ubc15\uc911 \uc5c9\ub9dd\uc9c4\uc9dc ...",url:"https://github.com/greenn-lab",imageURL:"https://github.com/greenn-lab.png",key:"green"}],frontMatter:{authors:["green"],title:"JMH(Java Measurement Harness) \ubca4\uce58\ub9c8\ud0b9 \ud14c\uc2a4\ud2b8",date:"2019-07-03T21:00",tags:["benchmarking","measurement"]},prevItem:{title:"create-react-app v2(with typescript)\uc5d0\uc11c Sass \uc0ac\uc6a9\uc774 \uc26c\uc6cc\uc84c\uc5b4\uc694",permalink:"/blog/2019/07/10/create-react-app-sass"},nextItem:{title:"\uad6c\ubb38 \ud615\uc2dd(Coding Style \ub610\ub294 Syntax Style) \uac00\uc774\ub4dc",permalink:"/blog/2019/05/28/coding-style-guide"}},l={authorsImageUrls:[void 0]},m=[{value:"\ud2b9\uc9d5",id:"\ud2b9\uc9d5",level:3},{value:"\uc2dc\uc791",id:"\uc2dc\uc791",level:3},{value:"\uc900\ube44",id:"\uc900\ube44",level:3},{value:"\uc2e4\ud589",id:"\uc2e4\ud589",level:3},{value:"\ub9fa\uc74c",id:"\ub9fa\uc74c",level:3}],p={toc:m},u="wrapper";function c(e){let{components:n,...t}=e;return(0,a.kt)(u,(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\ubca4\uce58\ub9c8\ud0b9 \ud14c\uc2a4\ud2b8\ub97c \ud574\ubcf4\uac8c\ub3c4 \ub418\ub124\uc694.",(0,a.kt)("br",{parentName:"p"}),"\n","\ud3ed\uc8fc\ud558\ub294 \uc11c\ube44\uc2a4\ub97c \uac1c\ubc1c\ud558\ub294\uac83\ub3c4 \uc544\ub2cc\ub370, \uadf8\ub0e5 \uc2ec\uc2ec\ud480\uc774\ub85c \uc11c\ud551\ud558\ub2e4\uac00 \ubcf4\uc5ec\uc11c \ud574\ubd24\uc5b4\uc694.  "),(0,a.kt)("h3",{id:"\ud2b9\uc9d5"},"\ud2b9\uc9d5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Oracle\b \uc5d0\uc11c JVM \uac1c\ubc1c\ud558\ub294 \ubd84\ub4e4\uc774 \ub9cc\ub4dc\uc168\ub2e4\uace0 \ud558\uace0"),(0,a.kt)("li",{parentName:"ul"},"Java9 \ubd80\ud130\ub294 \uacf5\uc2dd\uc801\uc73c\ub85c JDK\uc5d0 \uac19\uc774 \ubc30\ud3ec\ub41c\ub2e4\uace0 ",(0,a.kt)("a",{parentName:"li",href:"https://jayjaylab.tistory.com/26"},"\uc934\uc774\uc934\uc774\ub931"),"\uc5d0 \ud6cc\ub96d\ud55c \ubd84\uc774 \uc815\ub9ac\ud55c \ub0b4\uc6a9\uc744 \ucc38\uc870\ud558\uba74 \ub354 \ub9ce\uc740 \ud2b9\uc9d5\uc744 \uc5bb\uc744 \uc218 \uc788\uaca0\uc5b4\uc694.")),(0,a.kt)("h3",{id:"\uc2dc\uc791"},"\uc2dc\uc791"),(0,a.kt)("p",null,"\ub2f9\uc5f0\ud788 ",(0,a.kt)("a",{parentName:"p",href:"http://openjdk.java.net/projects/code-tools/jmh/"},"JMH \uacf5\uc2dd\uc0ac\uc774\ud2b8"),"\uc5d0\uc11c \ud655\uc778\ud558\uc2dc\ub294\uac8c \uc88b\uaca0\uc8e0. \uc800\ub294 \uc798 \ubaa8\ub974\uba74\uc11c \ub9c9\ud574\ubcf8\uac70\ub77c\uc11c...",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"http://hg.openjdk.java.net/code-tools/jmh/file/39ed8b3c11ce/jmh-samples/src/main/java/org/openjdk/jmh/samples"},"\uc0d8\ud50c \ucf54\ub4dc\ub4e4"),"\uc774 \ubcf4\uace0 \ub530\ub77c\ud558\uae30 \uc88b\uc740 \uac83 \uac19\uace0\uc694."),(0,a.kt)("h3",{id:"\uc900\ube44"},"\uc900\ube44"),(0,a.kt)("p",null,"\ud504\ub85c\uc81d\ud2b8\uc5d0 JMH\uc5d0 \uad00\ub828\ub41c dependency\ub97c \ucd94\uac00 \ud574\uc694. \uc800\ub294 gradle \ud658\uacbd\uc774\ub2c8\uae4c,"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-gradle"},"...\n\ndependencies {\n    ...\n    testImplementation 'org.openjdk.jmh:jmh-core:1.21'\n    testImplementation 'org.openjdk.jmh:jmh-generator-annprocess:1.21'\n}\n")),(0,a.kt)("p",null,"\uc774\ub807\uac8c ",(0,a.kt)("inlineCode",{parentName:"p"},"org.openjdk.jmh")," \uc758 ",(0,a.kt)("inlineCode",{parentName:"p"},"jmh-core")," \ub791 ",(0,a.kt)("inlineCode",{parentName:"p"},"jmh-generator-annprocess")," \ub97c \ucd94\uac00\ud558\uace0, ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/artyushov/idea-jmh-plugin"},"IntellJ\uc5d0 \ud50c\ub7ec\uadf8\uc778")," \uc744 \uc124\uce58 \ud588\uc5b4\uc694.\n\ud50c\ub7ec\uadf8\uc778 \uc5c6\uc774"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"import org.openjdk.jmh.annotations.*;\n\nclass BenchmarkTest {\n\n  ...\n\n  public static void main(String[] args) throws RunnerException {\n    Options opt = new OptionsBuilder()\n        .include(BenchmarkTest.class.getSimpleName())\n        .warmupIterations(3)\n        .measurementIterations(1)\n        .forks(1)\n        .build();\n\n    new Runner(opt).run();\n\n  }\n}\n")),(0,a.kt)("p",null,"\uc774\ub807\uac8c \uc2e4\ud589\ud574\ub3c4 \ub418\uace0\uc694."),(0,a.kt)("h3",{id:"\uc2e4\ud589"},"\uc2e4\ud589"),(0,a.kt)("p",null,"\ucd5c\uadfc\uc5d0 \uc815\uc801\ubd84\uc11d\uc744 \ud558\uba74\uc11c ",(0,a.kt)("inlineCode",{parentName:"p"},"java.util.Random")," \uc744 ",(0,a.kt)("inlineCode",{parentName:"p"},"java.security.SecureRandom")," \uc73c\ub85c \ubc14\uafb8\ub77c\uace0 \uc9c0\uc801\ub41c\uac8c \uc788\uc5c8\uac70\ub4e0\uc694. \uadf8\ub798\uc11c \uadf8 \ub450\uac00\uc9c0\ub97c \ubca4\uce58\ub9c8\ud0b9 \ud574\ubd24\uc5b4\uc694."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"@State(Scope.Thread)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@Fork(1)\n@Warmup(iterations = 1)\n@BenchmarkMode(Mode.Throughput)\n@Measurement(iterations = 1)\npublic class BenchmarkTest {\n\n  private final Random random = new Random();\n\n  private final SecureRandom secureRandom = new SecureRandom();\n\n  @Benchmark\n  public void measureRandom() {\n    random.nextDouble();\n  }\n\n  @Benchmark\n  public void measureSecureRandom() {\n    secureRandom.nextDouble();\n  }\n}\n")),(0,a.kt)("p",null,"\uc2e4\ud589 \uacb0\uacfc \ub2e4\uc74c\uacfc \uac19\uc774 \ub9ac\ud3ec\ud2b8 \ub418\ub124\uc694."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'# JMH version: 1.21\n# VM version: JDK 1.8.0_181, Java HotSpot(TM) 64-Bit Server VM, 25.181-b13\n# VM invoker: /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home/jre/bin/java\n# VM options: -Dfile.encoding=UTF-8\n# Warmup: 1 iterations, 10 s each\n# Measurement: 1 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkTest.measureRandom\n\n# Run progress: 0.00% complete, ETA 00:00:40\n# Fork: 1 of 1\n# Warmup Iteration   1: 41945.262 ops/ms\nIteration   1: 42456.015 ops/ms\n\n\nResult "BenchmarkTest.measureRandom":\n  42456.015 ops/ms\n\n\n# JMH version: 1.21\n# VM version: JDK 1.8.0_181, Java HotSpot(TM) 64-Bit Server VM, 25.181-b13\n# VM invoker: /Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home/jre/bin/java\n# VM options: -Dfile.encoding=UTF-8\n# Warmup: 1 iterations, 10 s each\n# Measurement: 1 iterations, 10 s each\n# Timeout: 10 min per iteration\n# Threads: 1 thread, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: BenchmarkTest.measureSecureRandom\n\n# Run progress: 50.00% complete, ETA 00:00:20\n# Fork: 1 of 1\n# Warmup Iteration   1: 1826.455 ops/ms\nIteration   1: 1837.092 ops/ms\n\n\nResult "BenchmarkTest.measureSecureRandom":\n  1837.092 ops/ms\n\n\n# Run complete. Total time: 00:00:41\n\nREMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\nwhy the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\nexperiments, perform baseline and negative tests that provide experimental control, make sure\nthe benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\nDo not assume the numbers tell you what you want them to tell.\n\nBenchmark                           Mode  Cnt      Score   Error   Units\nBenchmarkTest.measureRandom        thrpt       42456.015          ops/ms\nBenchmarkTest.measureSecureRandom  thrpt        1837.092          ops/ms\n\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Score")," \uac00 42\ubc30\ucbe4 \ucc28\uc774\ub098\ub2c8\uae4c \uadf8\uac8c \uc131\ub2a5\ucc28\uc774\ub77c\uace0 \ubcf4\uba74 \ub420\uac83 \uac19\ub124\uc694. ",(0,a.kt)("inlineCode",{parentName:"p"},"REMEMBER")," \ubd80\ubd84\uc5d0 \uc801\ud78c \uae00\uc744 \ubcf4\ub2c8\uae4c \uadf8\ub0e5 \ub370\uc774\ud130\ub85c\ub9cc \ucc38\uc870\ud558\ub77c\uace0 \ucca8\uc5b8\ud558\ub294 \uac83 \uac19\uc544\uc694. \uc7ac\uc0ac\uc6a9\ud558\ub294 \ud1b5\ucc30\uc744 \uc5bb\uc73c\ub824\uba74 \uc22b\uc790\ub4e4\uc774 \uac00\ub9ac\ud0a4\ub294 \uac78 \ub530\ub77c\uac00\ub77c\uace0 \ud558\uba74\uc11c\uc694."),(0,a.kt)("h3",{id:"\ub9fa\uc74c"},"\ub9fa\uc74c"),(0,a.kt)("p",null,"\uc800\ub294 \uadf8\ub0e5 \uc7ac\ubbf8\ub85c '\uc774\ub7f0\uac83\ub3c4 \uc788\uad6c\ub098' \ud558\uace0\uc120 \uc2dc\uc791\ud574\ubd24\ub294\ub370 \uc7ac\uc0ac\uc6a9\uc131\uc744 \uc704\ud574 refactoring\uc744 \ud558\uba74\uc11c \ucc44\uc810\uc2dd\uc73c\ub85c \uc218\uce58\ub97c \ud655\uc778\ud574\uac00\uba74, \uc758\uc695\ub3c4 \uc0dd\uae30\uace0 \ubcf4\ub78c\ub3c4 \uc0dd\uae38\uc9c0\ub294 \uc54a\uc744\uae4c \uc2f6\uae30\ub3c4 \ud574\uc694.  "),(0,a.kt)("p",null,"\ub354 \ud65c\uc6a9\ub3c4\uac00 \ub192\uc744\ud150\ub370 \uc81c \uc218\uc900\uc5d0\uc11c\ub294 \uc774\uc815\ub3c4 \ubc16\uc5d0 \ubaa8\ub974\uaca0\ub124\uc694. \uac04\uac04\ud788 \uc131\ub2a5\uc774\uc288\uc5d0 \ud65c\uc6a9\ud574\uc11c \ub354 \uc88b\uc740 \ud301\uc740 \ub610 \uc815\ub9ac\ud574 \ubd10\uc57c\uaca0\uc5b4\uc694."))}c.isMDXComponent=!0}}]);